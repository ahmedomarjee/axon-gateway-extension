name: Create a release

on:
  release:
    types:
      - created

jobs:
  create-release:

    - name: Checks out code
      uses: actions/checkout@v2

    - name: Read release tag
      uses: olegtarasov/get-tag@v2
      id: tagName

    - name: Announce version
      run: echo "creating library for ${GIT_TAG_NAME}"

    - name: Set up JDK 11
      uses: actions/setup-java@v1
      with:
        java-version: 11

    - name: Create a release
      run: mvn -B gitflow:release-start -DreleaseVersion=${GIT_TAG_NAME}